(function(e){var g,b,c,h,d,a;var f=function(ad,ac,ab){function O(j,i){var l=j.charAt(0).toUpperCase()+j.substr(1),k=(j+" "+Q.join(l+" ")+l).split(" ");return C(k,i)}function C(j,i){for(var k in j){if(T[j[k]]!==ab){return i=="pfx"?j[k]:!0}}return !1}function D(j,i){return !!~(""+j).indexOf(i)}function E(j,i){return typeof j===i}function F(j,i){return G(prefixes.join(j+";")+(i||""))}function G(i){T.cssText=i}var aa="2.0.6",Z={},Y=!0,X=ac.documentElement,W=ac.head||ac.getElementsByTagName("head")[0],V="modernizr",U=ac.createElement(V),T=U.style,S,R=Object.prototype.toString,Q="Webkit Moz O ms Khtml".split(" "),P={},N={},M={},K=[],J,I={}.hasOwnProperty,H;!E(I,ab)&&!E(I.call,ab)?H=function(j,i){return I.call(j,i)}:H=function(j,i){return i in j&&E(j.constructor.prototype[i],ab)},P.backgroundsize=function(){return O("backgroundSize")},P.csstransitions=function(){return O("transitionProperty")};for(var L in P){H(P,L)&&(J=L.toLowerCase(),Z[J]=P[L](),K.push((Z[J]?"":"no-")+J))}G(""),U=S=null,Z._version=aa,Z._domPrefixes=Q,Z.testProp=function(i){return C([i])},Z.testAllProps=O,X.className=X.className.replace(/\bno-js\b/,"")+(Y?" js "+K.join(" "):"");return Z}(this,this.document);g=function(i){var j={timeout:5000,speed:2000,fastSpeed:100,beforeTransition:null,currentClass:"current",fullscreen:false,shuffle:false};return this.each(function(){var n=e(this),p=n.data("tdslideshow");if(!p){p={};p.stopped=false;p.options=e.extend(j,i);if(p.options.fullscreen){n.css({width:"100%",height:"100%",position:"fixed",top:"0",left:"0"});if(e.browser.msie&&parseInt(e.browser.version,10)==6){n.css({position:"absolute"})}}if(p.options.fullscreen){if(f.backgroundsize&&f.csstransitions){n.children().each(function(){var q=e("<span>").css({display:"block",width:"100%",height:"100%","background-size":"cover",position:"absolute",top:"0",left:"0","background-position":"50% 50%",opacity:"0"}).addClass("not-loaded").data("image",e(this).detach()).appendTo(n)});p.$children=n.children()}else{e("html").css({overflow:"auto"});n.css({overflow:"hidden"});n.children().addClass("not-loaded").css({position:"absolute",left:"50%",top:"50%"})}}if(p.options.shuffle){var o=[];n.children().each(function(){o.push(e(this).css({display:"none"}).detach())});for(var l,k,m=o.length;m;l=parseInt(Math.random()*m),k=o[--m],o[m]=o[l],o[l]=k){}e(o).each(function(){e(this).appendTo(n).show()})}p.$children=n.children();p.currentIndex=0;p.$current=p.$children.eq(0).addClass(p.options.currentClass).addClass("display-now");n.data("tdslideshow",p);if(!f.backgroundsize||!f.csstransitions){e(window).resize(function(){p.$children.each(function(){resizeImage(e(this))})})}loadImage(n,p.$children.eq(0))}})};c=function(){return this.each(function(){var i=e(this),j=i.data("tdslideshow");if(!j||!j.timeoutId){return}j.stopped=true;clearTimeout(j.timeoutId);i.data("tdslideshow",j)})};h=function(){return this.each(function(){var i=e(this),j=i.data("tdslideshow");if(!j||!j.stopped){return}j.stopped=false;j.timeoutId=setTimeout(function(){d(i)},j.options.timeout);i.data("tdslideshow",j)})};resizeImage=function(l){var q=l.width(),n=l.height(),m=e(window).width(),j=e(window).height(),p=m/q,o=j/n,k=o*q,i=p*n;if(i>j){l.css({width:m+"px",height:i+"px","margin-left":"-"+m/2+"px","margin-top":"-"+i/2+"px"})}else{l.css({width:k+"px",height:j+"px","margin-left":"-"+k/2+"px","margin-top":"-"+j/2+"px"})}};loadImage=function(j,k){var l=j.data("tdslideshow");var i;if(k[0].tagName.toLowerCase()=="span"){i=k.data("image")}else{i=k}i.css({opacity:0}).attr("src",i.attr("data-src"));k.removeClass("not-loaded").addClass("loading");i.data("load-watcher",i.imagesLoaded().done(function(){if(k[0].tagName.toLowerCase()=="span"){k.css({"background-image":"url('"+i.attr("src")+"')"})}else{resizeImage(k)}if(k.index()<l.$children.length-1){if(l.$children.eq(k.index()+1).hasClass("not-loaded")){loadImage(j,l.$children.eq(k.index()+1))}}var m=k.hasClass("display-now");k.removeClass("loading").addClass("loaded");j.data("tdslideshow",l);if(m){displayNext(j,k.index())}}))};displayNext=function(j,i){var k=j.data("tdslideshow");if(typeof i==="number"){k.currentIndex=i}else{k.currentIndex=k.$current.index()+1}if(k.currentIndex>=k.$children.length){k.currentIndex=0}$next=k.$children.eq(k.currentIndex);clearTimeout(k.timeoutId);if($next.hasClass("loaded")){if(typeof k.options.beforeTransition==="function"){k.options.beforeTransition.apply(this,[k.currentIndex])}k.$current.removeClass(k.options.currentClass);$next.addClass(k.options.currentClass).removeClass("display-now");k.$current.css({"z-index":0});$next.css({"z-index":100});if(f.backgroundresize&&f.csstransitions){$next.bind("transitionend oTransitionEnd webkitTransitionEnd",function(){$next.unbind("transitionend oTransitionEnd webkitTransitionEnd");animationComplete()});$next.css({opacity:1})}else{$next.css({opacity:0,display:"block"}).animate({opacity:1},k.options.speed,function(){animationComplete()})}animationComplete=function(){if(k.$current.index()!=$next.index()){if(f.backgroundsize&&f.csstransitions){k.$current.css({opacity:0})}else{k.$current.hide()}k.$current=$next}if(k.stopped){delete k.timeoutId}else{k.timeoutId=setTimeout(function(){displayNext(j)},k.options.timeout)}j.data("tdslideshow",k)}}else{$next.addClass("display-now");return}j.data("tdslideshow",k)};a={init:g,gotoSlide:b,stop:c,start:h};e.fn.tdslideshow=function(i){if(a[i]){return a[i].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof i==="object"||!i){return a.init.apply(this,arguments)}else{e.error("Method "+i+" does not exist on jQuery.tdslideshow")}}}})(jQuery);